:root{
  --bg:#111418;
  --fg:#e6e9ef;
  --muted:#a0a6b0;
  --tile-border:#3a3f46;
  --correct:#6ba865;
  --present:#c8b358;
  --absent:#787c7e;
  --key-bg:#2a2f36;
  --key-fg:#e6e9ef;
  --accent:#7aa2ff;
  --brand:#6aaa65;
  --brand-hover:#63b060;
  --brand-press:#538a50;
  --tile-size:clamp(42px, 7.8vw, 64px);
  --btn-bg:#6aaa65; /* зелени бутони */
  --btn-border:#5e995a;
  --btn-hover:#63b060;
  --modal-bg:#f2f4f7; /* светъл модал */
}

[data-theme="light"]{
  --bg:#f7f8fa;
  --fg:#0f172a;
  --muted:#475569;
  --tile-border:#d0d5dd;
  --correct:#6ba865;
  --present:#c8b358;
  --absent:#cbd5e1;
  --key-bg:#e9eef5;
  --key-fg:#0f172a;
  --accent:#2563eb;
  --btn-bg:#6aaa65;
  --btn-border:#5e995a;
  --btn-hover:#63b060;
  --modal-bg:#f2f4f7;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.topbar{
  width:100%;
  max-width:768px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  border-bottom:1px solid var(--tile-border);
  position:sticky;
  top:0;
  background:var(--bg);
  z-index:10;
  box-shadow:0 1px 0 rgba(0,0,0,.08);
  backdrop-filter:saturate(1.2) blur(2px);
}
.topbar .left,.topbar .right{display:flex;gap:10px}
.topbar .center{display:flex;align-items:center;gap:12px}
.topbar button{
  background:var(--key-bg);
  color:var(--key-fg);
  border:1px solid var(--tile-border);
  border-radius:12px;
  padding:12px 16px;
  cursor:pointer;
  font-size:16px;
  transition:background-color .15s, transform .02s, filter .15s;
}
.topbar button:hover{background:var(--tile-border); filter:saturate(1.05)}
.topbar button:active{transform:translateY(1px)}
.topbar button:disabled{opacity:.5;cursor:default}

/* Всички стандартни бутони (без клавишите и topbar бутоните) */
button:not(.key):not(.topbar button){
  background:var(--key-bg);
  color:var(--key-fg);
  border:1px solid var(--tile-border);
  border-radius:12px;
  padding:12px 18px;
  font-weight:700;
  font-size:16px;
  cursor:pointer;
  transition:background-color .15s, transform .02s, filter .15s;
}
button:not(.key):not(.topbar button):hover{background:var(--tile-border); filter:saturate(1.05)}
button:not(.key):not(.topbar button):active{transform:translateY(1px)}

.title{font-size:24px;font-weight:800;text-align:center;margin:14px 0 6px}

main{width:100%;max-width:768px;padding:10px 16px;display:flex;flex-direction:column;align-items:center}

.board{
  margin-top:6px;
  display:grid;
  grid-template-columns:repeat(6, var(--tile-size));
  grid-auto-rows:var(--tile-size);
  gap:6px;
}
.tile{
  width:var(--tile-size);height:var(--tile-size);
  display:flex;align-items:center;justify-content:center;
  border:2px solid var(--tile-border);
  text-transform:uppercase;
  font-weight:700;font-size:calc(var(--tile-size) * .45);
  user-select:none;
  border-radius:6px;
  transition:transform .08s ease, background-color .2s ease,border-color .2s ease;
}
.tile.filled{border-color:#58606a}
.tile.revealed{color:var(--fg)}
.tile.correct{background:var(--correct);border-color:var(--correct)}
.tile.present{background:var(--present);border-color:var(--present)}
.tile.absent{background:var(--absent);border-color:var(--absent)}

.keyboard{margin:18px auto 24px;display:flex;flex-direction:column;gap:8px;align-items:center}
.krow{display:flex;gap:6px}
.key{
  min-width:48px;
  padding:20px 16px; /* по-големи бутони */
  border-radius:12px;
  border:1px solid var(--tile-border);
  background:var(--key-bg);
  color:var(--key-fg);
  font-weight:700;
  font-size:18px;
  cursor:pointer;
  box-shadow:inset 0 -1px 0 rgba(0,0,0,.18);
}
.key.wide{min-width:92px}
.key.correct{background:var(--correct)}
.key.present{background:var(--present)}
.key.absent{background:#3b3f44;color:#fff}

/* Стилове за ENTER бутона според валидността на думата */
.key.valid-word{
  background:var(--correct) !important;
  color:#fff !important;
  box-shadow:0 0 8px rgba(107, 168, 101, 0.5);
}

.key.invalid-word{
  background:#787c7e !important;
  color:#fff !important;
}

[data-theme="light"] .key.absent{background:#94a3b8;color:#fff}

.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:24px;background:#22262d;color:#fff;padding:10px 14px;border-radius:6px;opacity:0;pointer-events:none;transition:opacity .2s}
.toast.show{opacity:1}

.modal{border:none;border-radius:16px;background:var(--modal-bg);color:#0f172a;padding:24px 24px;max-width:720px}
.modal::backdrop{background:rgba(0,0,0,.45)}
.modal h2{margin:0 0 12px}
.modal h3{margin:14px 0 10px}
.modal p{line-height:1.6}
.modal .actions{display:flex;gap:12px;margin-top:16px;justify-content:flex-end}
.modal .actions button{background:linear-gradient(180deg, var(--btn-bg) 0%, var(--brand-hover) 100%);color:#fff;border:none;border-radius:9999px;padding:10px 16px;font-weight:700;box-shadow:0 6px 16px rgba(106,170,101,.35)}
.modal-wide{width:min(92vw,720px)}

.stats-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin:12px 0 10px}
.stats-grid .num{font-size:26px;font-weight:800;text-align:center}
.stats-grid .lbl{font-size:12px;color:var(--muted);text-align:center}
.dist{display:flex;flex-direction:column;gap:10px}
.dist .bar{display:flex;align-items:center;gap:10px}
.dist .bar .label{width:22px;text-align:right;color:var(--muted)}
.dist .bar .meter{background:#e5e7eb;height:22px;border-radius:6px;min-width:40px}
.dist .bar .fill{background:var(--brand);height:100%;border-radius:6px;color:#fff;font-weight:700;display:flex;align-items:center;justify-content:flex-end;padding-right:6px}

.table{width:100%;border-collapse:collapse;margin-top:8px}
.table th,.table td{border-bottom:1px solid var(--tile-border);padding:8px;text-align:left}
.table th{color:var(--muted);font-weight:600}
.me{margin:6px 0;color:var(--muted)}

.date-label{min-width:150px;text-align:center}
.timer-label{min-width:120px;text-align:center;color:var(--muted);font-size:12px}
.ex.tile{display:inline-flex;width:28px;height:28px;font-size:16px;margin-right:4px}

/* Заря ефект при победа */
.celebration-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.celebration-overlay.show {
  opacity: 1;
}

.firework {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  animation: firework 3s ease-out forwards;
  box-shadow: 0 0 10px currentColor;
}

@keyframes firework {
  0% {
    transform: scale(0);
    opacity: 1;
    box-shadow: 0 0 5px currentColor;
  }
  30% {
    transform: scale(1.5);
    opacity: 1;
    box-shadow: 0 0 20px currentColor;
  }
  70% {
    transform: scale(2.5);
    opacity: 0.6;
    box-shadow: 0 0 30px currentColor;
  }
  100% {
    transform: scale(4);
    opacity: 0;
    box-shadow: 0 0 40px currentColor;
  }
}

.spark {
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  animation: spark 2.5s ease-out forwards;
  box-shadow: 0 0 6px currentColor;
}

@keyframes spark {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
    box-shadow: 0 0 3px currentColor;
  }
  50% {
    opacity: 0.8;
    box-shadow: 0 0 8px currentColor;
  }
  100% {
    transform: translate(var(--dx), var(--dy)) scale(0);
    opacity: 0;
    box-shadow: 0 0 12px currentColor;
  }
}
